{
  "version": 3,
  "sources": ["../../.pnpm/@babel+runtime@7.26.7/node_modules/@babel/runtime/helpers/esm/typeof.js", "../../.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/_lib/requiredArgs/index.js", "../../.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/toDate/index.js", "../../.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/startOfDay/index.js", "../../.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/isSameDay/index.js", "../../.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/isToday/index.js", "../../.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/_lib/toInteger/index.js", "../../.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/addDays/index.js", "../../.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/subDays/index.js", "../../.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/isYesterday/index.js", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/debounce.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/helpers.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/url.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/types/message.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/email.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/string.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/math.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/canned.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/typingStatus.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/sla.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/date.ts", "../../.pnpm/@chatwoot+utils@0.0.51/node_modules/@chatwoot/utils/src/fileUploadRules.ts"],
  "sourcesContent": ["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };", "export default function requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}", "import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport default function toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument);\n\n  // Clone the date\n  if (argument instanceof Date || _typeof(argument) === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments\");\n      // eslint-disable-next-line no-console\n      console.warn(new Error().stack);\n    }\n    return new Date(NaN);\n  }\n}", "import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * @param {Date|Number} date - the original date\n * @returns {Date} the start of a day\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\nexport default function startOfDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}", "import startOfDay from \"../startOfDay/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isSameDay\n * @category Day Helpers\n * @summary Are the given dates in the same day (and year and month)?\n *\n * @description\n * Are the given dates in the same day (and year and month)?\n *\n * @param {Date|Number} dateLeft - the first date to check\n * @param {Date|Number} dateRight - the second date to check\n * @returns {Boolean} the dates are in the same day (and year and month)\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))\n * //=> true\n *\n * @example\n * // Are 4 September and 4 October in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))\n * //=> false\n *\n * @example\n * // Are 4 September, 2014 and 4 September, 2015 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))\n * //=> false\n */\nexport default function isSameDay(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeftStartOfDay = startOfDay(dirtyDateLeft);\n  var dateRightStartOfDay = startOfDay(dirtyDateRight);\n  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();\n}", "import isSameDay from \"../isSameDay/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isToday\n * @category Day Helpers\n * @summary Is the given date today?\n * @pure false\n *\n * @description\n * Is the given date today?\n *\n * > ⚠️ Please note that this function is not present in the FP submodule as\n * > it uses `Date.now()` internally hence impure and can't be safely curried.\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date is today\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // If today is 6 October 2014, is 6 October 14:00:00 today?\n * const result = isToday(new Date(2014, 9, 6, 14, 0))\n * //=> true\n */\nexport default function isToday(dirtyDate) {\n  requiredArgs(1, arguments);\n  return isSameDay(dirtyDate, Date.now());\n}", "export default function toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n  var number = Number(dirtyNumber);\n  if (isNaN(number)) {\n    return number;\n  }\n  return number < 0 ? Math.ceil(number) : Math.floor(number);\n}", "import toInteger from \"../_lib/toInteger/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of days to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} - the new date with the days added\n * @throws {TypeError} - 2 arguments required\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport default function addDays(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n  if (isNaN(amount)) {\n    return new Date(NaN);\n  }\n  if (!amount) {\n    // If 0 days, no-op to avoid changing times in the hour before end of DST\n    return date;\n  }\n  date.setDate(date.getDate() + amount);\n  return date;\n}", "import addDays from \"../addDays/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nimport toInteger from \"../_lib/toInteger/index.js\";\n/**\n * @name subDays\n * @category Day Helpers\n * @summary Subtract the specified number of days from the given date.\n *\n * @description\n * Subtract the specified number of days from the given date.\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of days to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the days subtracted\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Subtract 10 days from 1 September 2014:\n * const result = subDays(new Date(2014, 8, 1), 10)\n * //=> Fri Aug 22 2014 00:00:00\n */\nexport default function subDays(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addDays(dirtyDate, -amount);\n}", "import isSameDay from \"../isSameDay/index.js\";\nimport subDays from \"../subDays/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isYesterday\n * @category Day Helpers\n * @summary Is the given date yesterday?\n * @pure false\n *\n * @description\n * Is the given date yesterday?\n *\n * > ⚠️ Please note that this function is not present in the FP submodule as\n * > it uses `Date.now()` internally hence impure and can't be safely curried.\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date is yesterday\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // If today is 6 October 2014, is 5 October 14:00:00 yesterday?\n * const result = isYesterday(new Date(2014, 9, 5, 14, 0))\n * //=> true\n */\nexport default function isYesterday(dirtyDate) {\n  requiredArgs(1, arguments);\n  return isSameDay(dirtyDate, subDays(Date.now(), 1));\n}", "/**\n * Creates a debounced version of a function that delays invoking the provided function\n * until after a specified wait time has elapsed since the last time it was invoked.\n *\n * @param {Function} func - The function to debounce. Will receive any arguments passed to the debounced function.\n * @param {number} wait - The number of milliseconds to delay execution after the last call.\n * @param {boolean} [immediate] - If true, the function will execute immediately on the first call,\n *                               then start the debounce behavior for subsequent calls.\n * @param {number} [maxWait] - The maximum time the function can be delayed before it's forcibly executed.\n *                            If specified, the function will be called after this many milliseconds\n *                            have passed since its last execution, regardless of the debounce wait time.\n *\n * @returns {Function} A debounced version of the original function that has the following behavior:\n *   - Delays execution until `wait` milliseconds have passed since the last call\n *   - If `immediate` is true, executes on the leading edge of the first call\n *   - If `maxWait` is provided, ensures the function is called at least once every `maxWait` milliseconds\n *   - Preserves the `this` context and arguments of the most recent call\n *   - Cancels pending executions when called again within the wait period\n *\n * @example\n * // Basic debounce\n * const debouncedSearch = debounce(searchAPI, 300);\n *\n * // With immediate execution\n * const debouncedSave = debounce(saveData, 1000, true);\n *\n * // With maximum wait time\n * const debouncedUpdate = debounce(updateUI, 200, false, 1000);\n */\nexport const debounce = (\n  func: (...args: any[]) => void,\n  wait: number,\n  immediate?: boolean,\n  maxWait?: number\n) => {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  let lastInvokeTime = 0;\n\n  return function(this: any, ...args: any[]) {\n    const time = Date.now();\n    const isFirstCall = lastInvokeTime === 0;\n\n    // Check if this is the first call and immediate execution is requested\n    if (isFirstCall && immediate) {\n      lastInvokeTime = time;\n      func.apply(this, args);\n      return;\n    }\n\n    // Clear any existing timeout\n    if (timeout !== null) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n\n    // Calculate if maxWait threshold has been reached\n    const timeSinceLastInvoke = time - lastInvokeTime;\n    const shouldInvokeNow =\n      maxWait !== undefined && timeSinceLastInvoke >= maxWait;\n\n    if (shouldInvokeNow) {\n      lastInvokeTime = time;\n      func.apply(this, args);\n      return;\n    }\n\n    // Set a new timeout\n    timeout = setTimeout(() => {\n      lastInvokeTime = Date.now();\n      timeout = null;\n      func.apply(this, args);\n    }, wait);\n  };\n};\n", "import isToday from 'date-fns/isToday';\nimport isYesterday from 'date-fns/isYesterday';\n/**\n * @name Get contrasting text color\n * @description Get contrasting text color from a text color\n * @param bgColor  Background color of text.\n * @returns contrasting text color\n */\nexport const getContrastingTextColor = (bgColor: string): string => {\n  const color = bgColor.replace('#', '');\n  const r = parseInt(color.slice(0, 2), 16);\n  const g = parseInt(color.slice(2, 4), 16);\n  const b = parseInt(color.slice(4, 6), 16);\n  // http://stackoverflow.com/a/3943023/112731\n  return r * 0.299 + g * 0.587 + b * 0.114 > 186 ? '#000000' : '#FFFFFF';\n};\n\n/**\n * @name Get formatted date\n * @description Get date in today, yesterday or any other date format\n * @param date  date\n * @param todayText  Today text\n * @param yesterdayText  Yesterday text\n * @returns formatted date\n */\nexport const formatDate = ({\n  date,\n  todayText,\n  yesterdayText,\n}: {\n  date: string;\n  todayText: string;\n  yesterdayText: string;\n}) => {\n  const dateValue = new Date(date);\n  if (isToday(dateValue)) return todayText;\n  if (isYesterday(dateValue)) return yesterdayText;\n  return date;\n};\n\n/**\n * @name formatTime\n * @description Format time to Hour, Minute and Second\n * @param timeInSeconds  number\n * @returns formatted time\n */\n\nexport const formatTime = (timeInSeconds: number) => {\n  let formattedTime = '';\n  if (timeInSeconds >= 60 && timeInSeconds < 3600) {\n    const minutes = Math.floor(timeInSeconds / 60);\n    formattedTime = `${minutes} Min`;\n    const seconds = minutes === 60 ? 0 : Math.floor(timeInSeconds % 60);\n    return formattedTime + `${seconds > 0 ? ' ' + seconds + ' Sec' : ''}`;\n  }\n  if (timeInSeconds >= 3600 && timeInSeconds < 86400) {\n    const hours = Math.floor(timeInSeconds / 3600);\n    formattedTime = `${hours} Hr`;\n    const minutes =\n      timeInSeconds % 3600 < 60 || hours === 24\n        ? 0\n        : Math.floor((timeInSeconds % 3600) / 60);\n    return formattedTime + `${minutes > 0 ? ' ' + minutes + ' Min' : ''}`;\n  }\n  if (timeInSeconds >= 86400) {\n    const days = Math.floor(timeInSeconds / 86400);\n    formattedTime = `${days} Day`;\n    const hours =\n      timeInSeconds % 86400 < 3600 || days >= 364\n        ? 0\n        : Math.floor((timeInSeconds % 86400) / 3600);\n    return formattedTime + `${hours > 0 ? ' ' + hours + ' Hr' : ''}`;\n  }\n  return `${Math.floor(timeInSeconds)} Sec`;\n};\n\n/**\n * @name trimContent\n * @description Trim a string to max length\n * @param content String to trim\n * @param maxLength Length of the string to trim, default 1024\n * @param ellipsis Boolean to add dots at the end of the string, default false\n * @returns trimmed string\n */\nexport const trimContent = (\n  content: string = '',\n  maxLength: number = 1024,\n  ellipsis: boolean = false\n) => {\n  let trimmedContent = content;\n  if (content.length > maxLength) {\n    trimmedContent = content.substring(0, maxLength);\n  }\n  if (ellipsis) {\n    trimmedContent = trimmedContent + '...';\n  }\n  return trimmedContent;\n};\n\n/**\n * @name convertSecondsToTimeUnit\n * @description Convert seconds to time unit\n * @param seconds  number\n * @param unitNames  object\n * @returns time and unit\n * @example\n * convertToUnit(60, { minute: 'm', hour: 'h', day: 'd' }); // { time: 1, unit: 'm' }\n * convertToUnit(60, { minute: 'Minutes', hour: 'Hours', day: 'Days' }); // { time: 1, unit: 'Minutes' }\n */\n\nexport const convertSecondsToTimeUnit = (\n  seconds: number,\n  unitNames: { minute: string; hour: string; day: string }\n) => {\n  if (seconds === null || seconds === 0) return { time: '', unit: '' };\n  if (seconds < 3600)\n    return { time: Number((seconds / 60).toFixed(1)), unit: unitNames.minute };\n  if (seconds < 86400)\n    return { time: Number((seconds / 3600).toFixed(1)), unit: unitNames.hour };\n  return { time: Number((seconds / 86400).toFixed(1)), unit: unitNames.day };\n};\n\n/**\n * @name fileNameWithEllipsis\n * @description Truncates a filename while preserving the extension\n * @param {Object} file - File object containing filename or name property\n * @param {number} [maxLength=26] - Maximum length of the filename (excluding extension)\n * @param {string} [ellipsis='…'] - Character to use for truncation\n * @returns {string} Truncated filename with extension\n * @example\n * fileNameWithEllipsis({ filename: 'very-long-filename.pdf' }, 10) // 'very-long-f….pdf'\n * fileNameWithEllipsis({ name: 'short.txt' }, 10) // 'short.txt'\n */\nexport const fileNameWithEllipsis = (\n  file: { filename?: string; name?: string },\n  maxLength: number = 26,\n  ellipsis: string = '…'\n): string => {\n  const fullName = file?.filename ?? file?.name ?? 'Untitled';\n\n  const dotIndex = fullName.lastIndexOf('.');\n  if (dotIndex === -1) return fullName;\n\n  const [name, extension] = [\n    fullName.slice(0, dotIndex),\n    fullName.slice(dotIndex),\n  ];\n\n  if (name.length <= maxLength) return fullName;\n\n  return `${name.slice(0, maxLength)}${ellipsis}${extension}`;\n};\n\n/**\n * @name splitName\n * @description Splits a full name into firstName and lastName\n * @param {string} name - Full name of the user\n * @returns {Object} Object with firstName and lastName\n * @example\n * splitName('Mary Jane Smith') // { firstName: 'Mary Jane', lastName: 'Smith' }\n * splitName('Alice') // { firstName: 'Alice', lastName: '' }\n * splitName('John Doe') // { firstName: 'John', lastName: 'Doe' }\n * splitName('') // { firstName: '', lastName: '' }\n */\nexport const splitName = (\n  fullName: string\n): { firstName: string; lastName: string } => {\n  const trimmedName = fullName.trim();\n  if (!trimmedName) {\n    return {\n      firstName: '',\n      lastName: '',\n    };\n  }\n\n  // Split the name by spaces\n  const nameParts = trimmedName.split(/\\s+/);\n\n  // If only one word, treat it as firstName\n  if (nameParts.length === 1) {\n    return {\n      firstName: nameParts[0],\n      lastName: '',\n    };\n  }\n\n  // Last element is lastName, everything else is firstName\n  const lastName = nameParts.pop() || '';\n  const firstName = nameParts.join(' ');\n\n  return { firstName, lastName };\n};\n\ninterface DownloadFileOptions {\n  url: string;\n  type: string;\n  extension?: string | null;\n}\n/**\n * Downloads a file from a URL with proper file type handling\n * @name downloadFile\n * @description Downloads file from URL with proper type handling and cleanup\n * @param {Object} options Download configuration options\n * @param {string} options.url File URL to download\n * @param {string} options.type File type identifier\n * @param {string} [options.extension] Optional file extension\n * @returns {Promise<boolean>} Returns true if download successful, false otherwise\n */\nexport const downloadFile = async ({\n  url,\n  type,\n  extension = null,\n}: DownloadFileOptions): Promise<void> => {\n  if (!url || !type) {\n    throw new Error('Invalid download parameters');\n  }\n\n  try {\n    const response = await fetch(url, { cache: 'no-store' });\n\n    if (!response.ok) {\n      throw new Error(`Download failed: ${response.status}`);\n    }\n\n    const blobData = await response.blob();\n\n    const contentType = response.headers.get('content-type');\n\n    const fileExtension =\n      extension || (contentType ? contentType.split('/')[1] : type);\n\n    const dispositionHeader = response.headers.get('content-disposition');\n    const filenameMatch = dispositionHeader?.match(/filename=\"(.*?)\"/);\n\n    const filename =\n      filenameMatch?.[1] ?? `attachment_${Date.now()}.${fileExtension}`;\n\n    const blobUrl = URL.createObjectURL(blobData);\n    const link = Object.assign(document.createElement('a'), {\n      href: blobUrl,\n      download: filename,\n      style: 'display: none',\n    });\n\n    document.body.append(link);\n    link.click();\n    link.remove();\n    URL.revokeObjectURL(blobUrl);\n  } catch (error) {\n    throw error instanceof Error ? error : new Error('Download failed');\n  }\n};\n\ninterface FileInfo {\n  name: string; // Full filename with extension\n  type: string; // File extension only\n  base: string; // Filename without extension\n}\n/**\n * Extracts file information from a URL or file path.\n *\n * @param {string} url - The URL or file path to process\n * @returns {FileInfo} Object containing file information\n *\n * @example\n * getFileInfo('https://example.com/path/Document%20Name.PDF')\n * returns {\n *   name: 'Document Name.PDF',\n *   type: 'pdf',\n *   base: 'Document Name'\n * }\n *\n * getFileInfo('invalid/url')\n * returns {\n *   name: 'Unknown File',\n *   type: '',\n *   base: 'Unknown File'\n * }\n */\nexport const getFileInfo = (url: string): FileInfo => {\n  const defaultInfo: FileInfo = {\n    name: 'Unknown File',\n    type: '',\n    base: 'Unknown File',\n  };\n\n  if (!url || typeof url !== 'string') {\n    return defaultInfo;\n  }\n\n  try {\n    // Handle both URL and file path cases\n    const cleanUrl = url\n      .split(/[?#]/)[0] // Remove query params and hash\n      .replace(/\\\\/g, '/'); // Normalize path separators\n\n    const encodedFilename = cleanUrl.split('/').pop();\n    if (!encodedFilename) {\n      return defaultInfo;\n    }\n\n    const fileName = decodeURIComponent(encodedFilename);\n\n    // Handle hidden files (starting with dot)\n    if (fileName.startsWith('.') && !fileName.includes('.', 1)) {\n      return { name: fileName, type: '', base: fileName };\n    }\n\n    // last index is where the file extension starts\n    // This will handle cases where the file name has multiple dots\n    const lastDotIndex = fileName.lastIndexOf('.');\n    if (lastDotIndex === -1 || lastDotIndex === 0) {\n      return { name: fileName, type: '', base: fileName };\n    }\n\n    const base = fileName.slice(0, lastDotIndex);\n    const type = fileName.slice(lastDotIndex + 1).toLowerCase();\n\n    return { name: fileName, type, base };\n  } catch (error) {\n    console.error('Error processing file info:', error);\n    return defaultInfo;\n  }\n};\n\n/**\n * Formats a number with K/M/B/T suffixes using Intl.NumberFormat\n * @param {number | string | null | undefined} num - The number to format\n * @returns {string} Formatted string (e.g., \"1.2K\", \"2.3M\", \"999\")\n * @example\n * formatNumber(1234)     // \"1.2K\"\n * formatNumber(1000000)  // \"1M\"\n * formatNumber(999)      // \"999\"\n * formatNumber(12344)    // \"12.3K\"\n */\nexport const formatNumber = (\n  num: number | string | null | undefined\n): string => {\n  const n = Number(num) || 0;\n  return new Intl.NumberFormat('en', {\n    notation: 'compact',\n    maximumFractionDigits: 1,\n  } as Intl.NumberFormatOptions).format(n);\n};\n", "/**\n * URL related helper functions\n */\n\n/**\n * Converts various input formats to URL objects.\n * Handles URL objects, domain strings, relative paths, and full URLs.\n * @param {string|URL} input - Input to convert to URL object\n * @returns {URL|null} URL object or null if input is invalid\n */\nexport const toURL = (input: string | URL | null | undefined): URL | null => {\n  if (!input) return null;\n  if (input instanceof URL) return input;\n\n  if (\n    typeof input === 'string' &&\n    !input.includes('://') &&\n    !input.startsWith('/')\n  ) {\n    return new URL(`https://${input}`);\n  }\n\n  if (typeof input === 'string' && input.startsWith('/')) {\n    return new URL(input, window.location.origin);\n  }\n\n  return new URL(input as string);\n};\n\n/**\n * Determines if two URLs belong to the same host by comparing their normalized URL objects.\n * Handles various input formats including URL objects, domain strings, relative paths, and full URLs.\n * Returns false if either URL cannot be parsed or normalized.\n * @param {string|URL} url1 - First URL to compare\n * @param {string|URL} url2 - Second URL to compare\n * @returns {boolean} True if both URLs have the same host, false otherwise\n */\nexport const isSameHost = (\n  url1: string | URL | null | undefined,\n  url2: string | URL | null | undefined\n): boolean => {\n  try {\n    const urlObj1 = toURL(url1);\n    const urlObj2 = toURL(url2);\n\n    if (!urlObj1 || !urlObj2) return false;\n\n    return urlObj1.hostname === urlObj2.hostname;\n  } catch (error) {\n    return false;\n  }\n};\n\n/**\n * Check if a string is a valid domain name.\n * An empty string is allowed and considered valid.\n *\n * @param domain Domain to validate.\n * @returns Whether the domain matches the rules.\n */\nexport const isValidDomain = (domain: string): boolean => {\n  if (domain === '') return true;\n\n  const domainRegex = /^(?!-)(?!.*--)[\\p{L}0-9-]{1,63}(?<!-)(?:\\.(?!-)(?!.*--)[\\p{L}0-9-]{1,63}(?<!-))*\\.[\\p{L}]{2,63}$/u;\n\n  return domainRegex.test(domain) && domain.length <= 253;\n};\n", "export type EmailAttributes = {\n  bcc: string[] | null;\n  cc: string[] | null;\n  content_type: string;\n  date: string;\n  from: string[] | null;\n  html_content: {\n    full: string;\n    reply: string;\n    quoted: string;\n  };\n  in_reply_to: null;\n  message_id: string;\n  multipart: boolean;\n  number_of_attachments: number;\n  subject: string;\n  text_content: {\n    full: string;\n    reply: string;\n    quoted: string;\n  };\n  to: string[] | null;\n};\n\nexport type IncomingContentAttribute = {\n  email: EmailAttributes | null;\n};\n\nexport type OutgoingContentAttribute = {\n  cc_emails: string[] | null;\n  bcc_emails: string[] | null;\n  to_emails: string[] | null;\n  external_error: string;\n};\n\nexport type MessageContentAttributes =\n  | IncomingContentAttribute\n  | OutgoingContentAttribute;\n\nexport type MessageConversation = {\n  id: number;\n  assignee_id: number;\n  custom_attributes: Record<string, any>;\n  first_reply_created_at: number;\n  waiting_since: number;\n  status: string;\n  unread_count: number;\n  last_activity_at: number;\n  contact_inbox: { source_id: string };\n};\n\nexport type MessageAttachment = {\n  id: number;\n  message_id: number;\n  file_type: string;\n  account_id: number;\n  extension: null;\n  data_url: string;\n  thumb_url: string;\n  file_size: number;\n  width: null;\n  height: null;\n};\n\nexport type MessageSender = {\n  custom_attributes: {};\n  email: null;\n  id: number;\n  identifier: null;\n  name: string;\n  phone_number: null;\n  thumbnail: string;\n  type: string;\n};\n\nexport enum MessageType {\n  INCOMING = 0,\n  OUTGOING = 1,\n  ACTIVITY = 2,\n  TEMPLATE = 3,\n}\n\nexport type BaseEmailMessage = {\n  id: number;\n  content: null;\n  account_id: number;\n  inbox_id: number;\n  conversation_id: number;\n  message_type: MessageType;\n  created_at: number;\n  updated_at: string;\n  private: boolean;\n  status: string;\n  source_id: null;\n  content_type: string;\n  content_attributes: MessageContentAttributes;\n  sender_type: string;\n  sender_id: number;\n  external_source_ids: {};\n  additional_attributes: {};\n  processed_message_content: null;\n  sentiment: {};\n  conversation: MessageConversation;\n  attachments: MessageAttachment[];\n  sender: MessageSender;\n};\n\nexport type IncomingEmailMessage = BaseEmailMessage & {\n  message_type: MessageType.INCOMING;\n  content_attributes: IncomingContentAttribute;\n};\n\nexport type OutgoingEmailMessage = BaseEmailMessage & {\n  message_type: MessageType.OUTGOING;\n  content_attributes: OutgoingContentAttribute;\n};\n\nexport type EmailMessage = IncomingEmailMessage | OutgoingEmailMessage;\n", "import {\n  EmailMessage,\n  MessageType,\n  IncomingEmailMessage,\n  OutgoingEmailMessage,\n} from './types/message';\n\nexport function getRecipients(\n  lastEmail: EmailMessage,\n  conversationContact: string,\n  inboxEmail: string,\n  forwardToEmail: string\n) {\n  let to = [] as string[];\n  let cc = [] as string[];\n  let bcc = [] as string[];\n\n  // Reset emails if there's no lastEmail\n  if (!lastEmail) {\n    return { to, cc, bcc };\n  }\n\n  // Extract values from lastEmail and current conversation context\n  const { message_type: messageType } = lastEmail;\n\n  const isIncoming = messageType === MessageType.INCOMING;\n\n  let emailAttributes = {} as {\n    cc: string[] | null;\n    bcc: string[] | null;\n    from: string[] | null;\n    to: string[] | null;\n  };\n\n  if (isIncoming) {\n    const {\n      content_attributes: contentAttributes,\n    } = lastEmail as IncomingEmailMessage;\n    const email = contentAttributes.email;\n    emailAttributes = {\n      cc: email?.cc || [],\n      bcc: email?.bcc || [],\n      from: email?.from || [],\n      to: [],\n    };\n  } else {\n    const {\n      content_attributes: contentAttributes,\n    } = lastEmail as OutgoingEmailMessage;\n\n    const {\n      cc_emails: ccEmails = [],\n      bcc_emails: bccEmails = [],\n      to_emails: toEmails = [],\n    } = contentAttributes ?? {};\n\n    emailAttributes = {\n      cc: ccEmails,\n      bcc: bccEmails,\n      to: toEmails,\n      from: [],\n    };\n  }\n\n  let isLastEmailFromContact = false;\n  // this will be false anyway if the last email was outgoing\n  isLastEmailFromContact =\n    isIncoming && (emailAttributes.from ?? []).includes(conversationContact);\n\n  if (isIncoming) {\n    // Reply to sender if incoming\n    to.push(...(emailAttributes.from ?? []));\n  } else {\n    // Otherwise, reply to the last recipient (for outgoing message)\n    // If there is no to_emails, reply to the conversation contact\n    to.push(...(emailAttributes.to ?? [conversationContact]));\n  }\n\n  // Start building the cc list, including additional recipients\n  // If the email had multiple recipients, include them in the cc list\n  cc = emailAttributes.cc ? [...emailAttributes.cc] : [];\n  // Only include 'to' recipients in cc for incoming emails, not for outgoing\n  if (Array.isArray(emailAttributes.to) && isIncoming) {\n    cc.push(...emailAttributes.to);\n  }\n\n  // Add the conversation contact to cc if the last email wasn't sent by them\n  // Ensure the message is an incoming one\n  if (!isLastEmailFromContact && isIncoming) {\n    cc.push(conversationContact);\n  }\n\n  // Process BCC: Remove conversation contact from bcc as it is already in cc\n  bcc = (emailAttributes.bcc || []).filter(\n    emailAddress => emailAddress !== conversationContact\n  );\n\n  // Filter out undesired emails from cc:\n  // - Remove conversation contact from cc if they sent the last email\n  // - Remove inbox and forward-to email to prevent loops\n  // - Remove emails matching the reply UUID pattern\n  const replyUUIDPattern = /^reply\\+([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/i;\n  cc = cc.filter(email => {\n    if (email === conversationContact && isLastEmailFromContact) {\n      return false;\n    }\n    if (email === inboxEmail || email === forwardToEmail) {\n      return false;\n    }\n    if (replyUUIDPattern.test(email)) {\n      return false;\n    }\n    return true;\n  });\n\n  bcc = bcc.filter(email => {\n    if (\n      email === inboxEmail ||\n      email === forwardToEmail ||\n      replyUUIDPattern.test(email)\n    ) {\n      return false;\n    }\n\n    return true;\n  });\n\n  // Deduplicate each recipient list by converting to a Set then back to an array\n  to = Array.from(new Set(to));\n  cc = Array.from(new Set(cc));\n  bcc = Array.from(new Set(bcc));\n\n  return {\n    to,\n    cc,\n    bcc,\n  };\n}\n", "/**\n * Function that parses a string boolean value and returns the corresponding boolean value\n * @param {string | number} candidate - The string boolean value to be parsed\n * @return {boolean} - The parsed boolean value\n */\nexport function parseBoolean(candidate: string | number) {\n  try {\n    // lowercase the string, so TRUE becomes true\n    const candidateString = String(candidate).toLowerCase();\n\n    // wrap in boolean to ensure that the return value\n    // is a boolean even if values like 0 or 1 are passed\n    return Boolean(JSON.parse(candidateString));\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Sanitizes text for safe HTML rendering by escaping potentially dangerous characters\n * while preserving valid HTML tags.\n *\n * This function performs the following transformations:\n * - Converts newline characters (\\n) to HTML line breaks (<br>)\n * - Escapes stray '<' characters that are not part of valid HTML tags (e.g., \"x < 5\" → \"x &lt; 5\")\n * - Escapes stray '>' characters that are not part of valid HTML tags (e.g., \"x > 5\" → \"x &gt; 5\")\n * - Preserves valid HTML tags and their attributes (e.g., <div>, <span class=\"test\">, </p>)\n *\n * LIMITATIONS: This regex-based approach has known limitations:\n * - Cannot properly handle '>' characters inside HTML attributes (e.g., <div title=\"x > 5\"> may not work correctly)\n * - Complex nested quotes or edge cases may not be handled perfectly\n * - For more complex HTML sanitization needs, consider using a proper HTML parser\n *\n * @param {string | null | undefined} text - The text to sanitize. Can be null or undefined.\n * @returns {string} The sanitized text safe for HTML rendering, or the original value if null/undefined.\n *\n * @example\n * sanitizeTextForRender('Hello\\nWorld') // 'Hello<br>World'\n * sanitizeTextForRender('if x < 5') // 'if x &lt; 5'\n * sanitizeTextForRender('<div>Hello</div>') // '<div>Hello</div>'\n * sanitizeTextForRender('Price < $100 <strong>Sale!</strong>') // 'Price &lt; $100 <strong>Sale!</strong>'\n */\nexport function sanitizeTextForRender(text: string | null | undefined) {\n  if (!text) return '';\n\n  return (\n    text\n      .replace(/\\n/g, '<br>')\n\n      // Escape < that doesn't start a valid HTML tag\n      // Regex breakdown:\n      // <          - matches '<'\n      // (?!        - negative lookahead (not followed by)\n      //   \\/?      - optional forward slash for closing tags\n      //   \\w+      - one or more word characters (tag name)\n      //   (?:      - non-capturing group for attributes\n      //     \\s+    - whitespace before attributes\n      //     [^>]*  - any characters except '>' (attribute content)\n      //   )?       - attributes are optional\n      //   \\/?>     - optional self-closing slash, then '>'\n      // )          - end lookahead\n      .replace(/<(?!\\/?\\w+(?:\\s+[^>]*)?\\/?>)/g, '&lt;')\n\n      // Escape > that isn't part of an HTML tag\n      // Regex breakdown:\n      // (?<!       - negative lookbehind (not preceded by)\n      //   <        - opening '<'\n      //   \\/?      - optional forward slash for closing tags\n      //   \\w+      - one or more word characters (tag name)\n      //   (?:      - non-capturing group for attributes\n      //     \\s+    - whitespace before attributes\n      //     [^>]*  - any characters except '>' (attribute content)\n      //   )?       - attributes are optional\n      //   \\/?      - optional self-closing slash before >\n      // )          - end lookbehind\n      // >          - matches '>'\n      .replace(/(?<!<\\/?\\w+(?:\\s+[^>]*)?\\/?)>/g, '&gt;')\n  );\n}\n", "/**\n * Sorts an array of numbers in ascending order.\n * @param {number[]} arr - The array of numbers to be sorted.\n * @returns {number[]} - The sorted array.\n */\nexport function sortAsc(arr: number[]) {\n  // .slice() is used to create a copy of the array so that the original array is not mutated\n  return arr.slice().sort((a, b) => a - b);\n}\n\n/**\n * Calculates the quantile value of an array at a specified percentile.\n * @param {number[]} arr - The array of numbers to calculate the quantile value from.\n * @param {number} q - The percentile to calculate the quantile value for.\n * @returns {number} - The quantile value.\n */\nexport function quantile(arr: number[], q: number) {\n  const sorted = sortAsc(arr); // Sort the array in ascending order\n  return _quantileForSorted(sorted, q); // Calculate the quantile value\n}\n\n/**\n * Clamps a value between a minimum and maximum range.\n * @param {number} min - The minimum range.\n * @param {number} max - The maximum range.\n * @param {number} value - The value to be clamped.\n * @returns {number} - The clamped value.\n */\nexport function clamp(min: number, max: number, value: number) {\n  if (value < min) {\n    return min;\n  }\n  if (value > max) {\n    return max;\n  }\n  return value;\n}\n\n/**\n * This method assumes the the array provided is already sorted in ascending order.\n * It's a helper method for the quantile method and should not be exported as is.\n *\n * @param {number[]} arr - The array of numbers to calculate the quantile value from.\n * @param {number} q - The percentile to calculate the quantile value for.\n * @returns {number} - The quantile value.\n */\nfunction _quantileForSorted(sorted: number[], q: number) {\n  const clamped = clamp(0, 1, q); // Clamp the percentile between 0 and 1\n  const pos = (sorted.length - 1) * clamped; // Calculate the index of the element at the specified percentile\n  const base = Math.floor(pos); // Find the index of the closest element to the specified percentile\n  const rest = pos - base; // Calculate the decimal value between the closest elements\n\n  // Interpolate the quantile value between the closest elements\n  // Most libraries don't to the interpolation, but I'm just having fun here\n  // also see https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample\n  if (sorted[base + 1] !== undefined) {\n    // in case the position was a integer, the rest will be 0 and the interpolation will be skipped\n    return sorted[base] + rest * (sorted[base + 1] - sorted[base]);\n  }\n\n  // Return the closest element if there is no interpolation possible\n  return sorted[base];\n}\n\n/**\n * Calculates the quantile values for an array of intervals.\n * @param {number[]} data - The array of numbers to calculate the quantile values from.\n * @param {number[]} intervals - The array of intervals to calculate the quantile values for.\n * @returns {number[]} - The array of quantile values for the intervals.\n */\nexport const getQuantileIntervals = (data: number[], intervals: number[]) => {\n  // Sort the array in ascending order before looping through the intervals.\n  // depending on the size of the array and the number of intervals, this can speed up the process by at least twice\n  // for a random array of 100 numbers and 5 intervals, the speedup is 3x\n  const sorted = sortAsc(data);\n\n  return intervals.map(interval => {\n    return _quantileForSorted(sorted, interval);\n  });\n};\n\n/**\n * Calculates the relative position of a point from the center of an element\n *\n * @param {number} mouseX - The x-coordinate of the mouse pointer\n * @param {number} mouseY - The y-coordinate of the mouse pointer\n * @param {DOMRect} rect - The bounding client rectangle of the target element\n * @returns {{relativeX: number, relativeY: number}} Object containing x and y distances from center\n */\nexport const calculateCenterOffset = (\n  mouseX: number,\n  mouseY: number,\n  rect: DOMRect\n) => {\n  const centerX = rect.left + rect.width / 2;\n  const centerY = rect.top + rect.height / 2;\n\n  return {\n    relativeX: mouseX - centerX,\n    relativeY: mouseY - centerY,\n  };\n};\n\n/**\n * Applies a rotation matrix to coordinates\n * Used to adjust mouse coordinates based on the current rotation of the image\n * This function implements a standard 2D rotation matrix transformation:\n * [x']   [cos(θ) -sin(θ)] [x]\n * [y'] = [sin(θ)  cos(θ)] [y]\n *\n * @see {@link https://mathworld.wolfram.com/RotationMatrix.html} for mathematical derivation\n *\n * @param {number} relativeX - X-coordinate relative to center before rotation\n * @param {number} relativeY - Y-coordinate relative to center before rotation\n * @param {number} angle - Rotation angle in degrees\n * @returns {{rotatedX: number, rotatedY: number}} Coordinates after applying rotation matrix\n */\nexport const applyRotationTransform = (\n  relativeX: number,\n  relativeY: number,\n  angle: number\n) => {\n  const radians = (angle * Math.PI) / 180;\n  const cos = Math.cos(-radians);\n  const sin = Math.sin(-radians);\n\n  return {\n    rotatedX: relativeX * cos - relativeY * sin,\n    rotatedY: relativeX * sin + relativeY * cos,\n  };\n};\n\n/**\n * Converts absolute rotated coordinates to percentage values relative to image dimensions\n * Ensures values are clamped between 0-100% for valid CSS transform-origin properties\n *\n * @param {number} rotatedX - X-coordinate after rotation transformation\n * @param {number} rotatedY - Y-coordinate after rotation transformation\n * @param {number} width - Width of the target element\n * @param {number} height - Height of the target element\n * @returns {{x: number, y: number}} Normalized coordinates as percentages (0-100%)\n */\nexport const normalizeToPercentage = (\n  rotatedX: number,\n  rotatedY: number,\n  width: number,\n  height: number\n) => {\n  // Convert to percentages (0-100%) relative to image dimensions\n  // 50% represents the center point\n  // The division by (width/2) maps the range [-width/2, width/2] to [-50%, 50%]\n  // Adding 50% shifts this to [0%, 100%]\n  return {\n    x: Math.max(0, Math.min(100, 50 + (rotatedX / (width / 2)) * 50)),\n    y: Math.max(0, Math.min(100, 50 + (rotatedY / (height / 2)) * 50)),\n  };\n};\n", "import {\n  Conversation,\n  Sender,\n  Variables,\n  CustomAttributes,\n  Contact,\n  Inbox,\n} from './types/conversation';\nconst MESSAGE_VARIABLES_REGEX = /{{(.*?)}}/g;\n\nconst skipCodeBlocks = (str: string) => str.replace(/```(?:.|\\n)+?```/g, '');\n\nexport const capitalizeName = (name: string | null): string => {\n  if (!name) return ''; // Return empty string for null or undefined input\n\n  return name\n    .split(' ') // Split the name into words based on spaces\n    .map(word => {\n      if (!word) return ''; // Handle empty strings that might result from multiple spaces\n\n      // Capitalize only the first character, leaving the rest unchanged\n      // This correctly handles accented characters like 'í' in 'Aríel'\n      return word.charAt(0).toUpperCase() + word.slice(1);\n    })\n    .join(' '); // Rejoin the words with spaces\n};\n\nexport const getFirstName = ({ user }: { user: Sender }) => {\n  const firstName = user?.name ? user.name.split(' ').shift() : '';\n  return capitalizeName(firstName as string);\n};\n\nexport const getLastName = ({ user }: { user: Sender }) => {\n  if (user && user.name) {\n    const lastName =\n      user.name.split(' ').length > 1 ? user.name.split(' ').pop() : '';\n    return capitalizeName(lastName as string);\n  }\n  return '';\n};\n\nexport const getMessageVariables = ({\n  conversation,\n  contact,\n  inbox,\n}: {\n  conversation: Conversation;\n  contact?: Contact;\n  inbox?: Inbox;\n}) => {\n  const {\n    meta: { assignee, sender },\n    id,\n    custom_attributes: conversationCustomAttributes = {},\n  } = conversation;\n  const { custom_attributes: contactCustomAttributes } = contact || {};\n\n  const standardVariables = {\n    'contact.name': capitalizeName(sender?.name || ''),\n    'contact.first_name': getFirstName({ user: sender }),\n    'contact.last_name': getLastName({ user: sender }),\n    'contact.email': sender?.email,\n    'contact.phone': sender?.phone_number,\n    'contact.id': sender?.id,\n    'conversation.id': id,\n    'inbox.id': inbox?.id,\n    'inbox.name': inbox?.name,\n    'agent.name': capitalizeName(assignee?.name || ''),\n    'agent.first_name': getFirstName({ user: assignee }),\n    'agent.last_name': getLastName({ user: assignee }),\n    'agent.email': assignee?.email ?? '',\n  };\n  const conversationCustomAttributeVariables = Object.entries(\n    conversationCustomAttributes ?? {}\n  ).reduce((acc: CustomAttributes, [key, value]) => {\n    acc[`conversation.custom_attribute.${key}`] = value;\n    return acc;\n  }, {});\n\n  const contactCustomAttributeVariables = Object.entries(\n    contactCustomAttributes ?? {}\n  ).reduce((acc: CustomAttributes, [key, value]) => {\n    acc[`contact.custom_attribute.${key}`] = value;\n    return acc;\n  }, {});\n\n  const variables = {\n    ...standardVariables,\n    ...conversationCustomAttributeVariables,\n    ...contactCustomAttributeVariables,\n  };\n\n  return variables;\n};\n\nexport const replaceVariablesInMessage = ({\n  message,\n  variables,\n}: {\n  message: string;\n  variables: Variables;\n}) => {\n  // @ts-ignore\n  return message?.replace(MESSAGE_VARIABLES_REGEX, (_, replace) => {\n    return variables[replace.trim()]\n      ? variables[replace.trim().toLowerCase()]\n      : '';\n  });\n};\n\nexport const getUndefinedVariablesInMessage = ({\n  message,\n  variables,\n}: {\n  message: string;\n  variables: Variables;\n}) => {\n  const messageWithOutCodeBlocks = skipCodeBlocks(message);\n  const matches = messageWithOutCodeBlocks.match(MESSAGE_VARIABLES_REGEX);\n  if (!matches) return [];\n\n  return matches\n    .map(match => {\n      return match\n        .replace('{{', '')\n        .replace('}}', '')\n        .trim();\n    })\n    .filter(variable => {\n      return variables[variable] === undefined;\n    });\n};\n", "/**\n * Creates a typing indicator utility.\n * @param onStartTyping Callback function to be called when typing starts\n * @param onStopTyping Callback function to be called when typing stops after delay\n * @param idleTime Delay for idle time in ms before considering typing stopped\n * @returns An object with start and stop methods for typing indicator\n */\n\ntype CallbackFunction = () => void;\ntype Timeout = ReturnType<typeof setTimeout>;\n\nexport const createTypingIndicator = (\n  onStartTyping: CallbackFunction,\n  onStopTyping: CallbackFunction,\n  idleTime: number\n) => {\n  let timer: Timeout | null = null;\n\n  const start = (): void => {\n    if (!timer) {\n      onStartTyping();\n    }\n    reset();\n  };\n\n  const stop = (): void => {\n    if (timer) {\n      clearTimeout(timer as Timeout);\n      timer = null;\n      onStopTyping();\n    }\n  };\n\n  const reset = (): void => {\n    if (timer) {\n      clearTimeout(timer as Timeout);\n    }\n    timer = setTimeout(() => {\n      stop();\n    }, idleTime) as Timeout;\n  };\n\n  return { start, stop };\n};\n", "import { Conversation } from './types/conversation';\nimport { AppliedSla, SLAStatus } from './types/sla';\n\n/**\n * Calculates the threshold for an SLA based on the current time and the provided threshold.\n * @param timeOffset - The time offset in seconds.\n * @param threshold - The threshold in seconds or null if not applicable.\n * @returns The calculated threshold in seconds or null if the threshold is null.\n */\nconst calculateThreshold = (\n  timeOffset: number,\n  threshold: number | null\n): number | null => {\n  // Calculate the time left for the SLA to breach or the time since the SLA has missed\n  if (threshold === null) return null;\n  const currentTime = Math.floor(Date.now() / 1000);\n  return timeOffset + threshold - currentTime;\n};\n\n/**\n * Finds the most urgent SLA status based on the threshold.\n * @param SLAStatuses - An array of SLAStatus objects.\n * @returns The most urgent SLAStatus object.\n */\nconst findMostUrgentSLAStatus = (SLAStatuses: SLAStatus[]): SLAStatus => {\n  // Sort the SLAs based on the threshold and return the most urgent SLA\n  SLAStatuses.sort(\n    (sla1, sla2) => Math.abs(sla1.threshold) - Math.abs(sla2.threshold)\n  );\n  return SLAStatuses[0];\n};\n\n/**\n * Formats the SLA time in a human-readable format.\n * @param seconds - The time in seconds.\n * @returns A formatted string representing the time.\n */\nconst formatSLATime = (seconds: number): string => {\n  const units: { [key: string]: number } = {\n    y: 31536000, // 60 * 60 * 24 * 365\n    mo: 2592000, // 60 * 60 * 24 * 30\n    d: 86400, // 60 * 60 * 24\n    h: 3600, // 60 * 60\n    m: 60,\n  };\n\n  if (seconds < 60) {\n    return '1m';\n  }\n\n  // we will only show two parts, two max granularity's, h-m, y-d, d-h, m, but no seconds\n  const parts: string[] = [];\n\n  Object.keys(units).forEach(unit => {\n    const value = Math.floor(seconds / units[unit]);\n    if (seconds < 60 && parts.length > 0) return;\n    if (parts.length === 2) return;\n    if (value > 0) {\n      parts.push(value + unit);\n      seconds -= value * units[unit];\n    }\n  });\n  return parts.join(' ');\n};\n\n/**\n * Creates an SLA object based on the type, applied SLA, and chat details.\n * @param type - The type of SLA (FRT, NRT, RT).\n * @param appliedSla - The applied SLA details.\n * @param chat - The chat details.\n * @returns An object containing the SLA status or null if conditions are not met.\n */\nconst createSLAObject = (\n  type: string,\n  appliedSla: AppliedSla,\n  chat: Conversation\n): { threshold: number | null; type: string; condition: boolean } | null => {\n  const {\n    sla_first_response_time_threshold: frtThreshold,\n    sla_next_response_time_threshold: nrtThreshold,\n    sla_resolution_time_threshold: rtThreshold,\n    created_at: createdAt,\n  } = appliedSla;\n\n  const {\n    first_reply_created_at: firstReplyCreatedAt,\n    waiting_since: waitingSince,\n    status,\n  } = chat;\n\n  const SLATypes: {\n    [key: string]: { threshold: number | null; condition: boolean };\n  } = {\n    FRT: {\n      threshold: calculateThreshold(createdAt, frtThreshold),\n      //   Check FRT only if threshold is not null and first reply hasn't been made\n      condition:\n        frtThreshold !== null &&\n        (!firstReplyCreatedAt || firstReplyCreatedAt === 0),\n    },\n    NRT: {\n      threshold: calculateThreshold(waitingSince, nrtThreshold),\n      // Check NRT only if threshold is not null, first reply has been made and we are waiting since\n      condition:\n        nrtThreshold !== null && !!firstReplyCreatedAt && !!waitingSince,\n    },\n    RT: {\n      threshold: calculateThreshold(createdAt, rtThreshold),\n      // Check RT only if the conversation is open and threshold is not null\n      condition: status === 'open' && rtThreshold !== null,\n    },\n  };\n\n  const SLAStatus = SLATypes[type];\n  return SLAStatus ? { ...SLAStatus, type } : null;\n};\n\n/**\n * Evaluates SLA conditions and returns an array of SLAStatus objects.\n * @param appliedSla - The applied SLA details.\n * @param chat - The chat details.\n * @returns An array of SLAStatus objects.\n */\nconst evaluateSLAConditions = (\n  appliedSla: AppliedSla,\n  chat: Conversation\n): {\n  threshold: number;\n  type: string;\n  icon: string;\n  isSlaMissed: boolean;\n}[] => {\n  // Filter out the SLA based on conditions and update the object with the breach status(icon, isSlaMissed)\n  const SLATypes = ['FRT', 'NRT', 'RT'];\n  return SLATypes.map(type => createSLAObject(type, appliedSla, chat))\n    .filter(\n      (\n        SLAStatus\n      ): SLAStatus is { threshold: number; type: string; condition: boolean } =>\n        !!SLAStatus && SLAStatus.condition\n    )\n    .map(SLAStatus => ({\n      ...SLAStatus,\n      icon: SLAStatus.threshold <= 0 ? 'flame' : 'alarm',\n      isSlaMissed: SLAStatus.threshold <= 0,\n    }));\n};\n\n/**\n * Evaluates the SLA status for a given chat and applied SLA.\n * @param {Object} params - The parameters object.\n * @param params.appliedSla - The applied SLA details.\n * @param params.chat - The chat details.\n * @returns An object containing the most urgent SLA status.\n */\nexport const evaluateSLAStatus = ({\n  appliedSla,\n  chat,\n}: {\n  appliedSla: AppliedSla;\n  chat: Conversation;\n}): { type: string; threshold: string; icon: string; isSlaMissed: boolean } => {\n  if (!appliedSla || !chat)\n    return { type: '', threshold: '', icon: '', isSlaMissed: false };\n\n  // Filter out the SLA and create the object for each breach\n  const SLAStatuses = evaluateSLAConditions(appliedSla, chat) as SLAStatus[];\n\n  // Return the most urgent SLA which is latest to breach or has missed\n  const mostUrgent = findMostUrgentSLAStatus(SLAStatuses);\n  return mostUrgent\n    ? {\n        type: mostUrgent?.type,\n        threshold: formatSLATime(\n          mostUrgent.threshold <= 0\n            ? -mostUrgent.threshold\n            : mostUrgent.threshold\n        ),\n        icon: mostUrgent.icon,\n        isSlaMissed: mostUrgent.isSlaMissed,\n      }\n    : { type: '', threshold: '', icon: '', isSlaMissed: false };\n};\n", "/**\n * Parses various date formats into a JavaScript Date object\n *\n * This function handles different date input formats commonly found in conversation data:\n * - 10-digit timestamps (Unix seconds) - automatically converted to milliseconds\n * - 13-digit timestamps (Unix milliseconds) - used directly\n * - String representations of timestamps\n * - ISO date strings (e.g., \"2025-06-01T12:30:00Z\")\n * - Simple date strings (e.g., \"2025-06-01\") - time defaults to 00:00:00\n * - Date strings with space-separated time (e.g., \"2025-06-01 12:30:00\")\n *\n * Note: This function follows JavaScript Date constructor behavior for date parsing.\n * Some invalid dates like \"2025-02-30\" auto-correct to valid dates (becomes \"2025-03-02\"),\n * while malformed strings like \"2025-13-01\" or \"2025-06-01T25:00:00\" return null.\n *\n * @example\n * coerceToDate('2025-06-01') // Returns Date object set to 2025-06-01 00:00:00\n * coerceToDate('2025-06-01T12:30:00Z') // Returns Date object with specified time\n * coerceToDate(1748834578) // Returns Date object (10-digit timestamp in seconds)\n * coerceToDate(1748834578000) // Returns Date object (13-digit timestamp in milliseconds)\n * coerceToDate('1748834578') // Returns Date object (string timestamp converted)\n * coerceToDate(null) // Returns null\n * coerceToDate('invalid-date') // Returns null\n */\nexport const coerceToDate = (\n  dateInput: string | number | null | undefined\n): Date | null => {\n  if (dateInput == null) return null;\n\n  let timestamp = typeof dateInput === 'number' ? dateInput : null;\n\n  // Handle string inputs that represent numeric timestamps\n  if (\n    timestamp === null &&\n    typeof dateInput === 'string' &&\n    /^\\d+$/.test(dateInput)\n  ) {\n    timestamp = Number(dateInput);\n  }\n\n  // Process numeric timestamps\n  if (timestamp !== null) {\n    // Convert 10-digit timestamps (seconds) to milliseconds\n    const timestampMs =\n      timestamp.toString().length === 10 ? timestamp * 1000 : timestamp;\n    return new Date(timestampMs);\n  }\n\n  // Process string date inputs\n  if (typeof dateInput === 'string') {\n    const dateObj = new Date(dateInput);\n\n    // Return null for invalid dates\n    if (Number.isNaN(dateObj.getTime())) return null;\n\n    // If no time component is specified, set time to 00:00:00\n    // this is because by default JS will set the time to midnight UTC for that date\n    const hasTimeComponent =\n      /T\\d{2}:\\d{2}(:\\d{2})?/.test(dateInput) || /\\d{2}:\\d{2}/.test(dateInput);\n    if (!hasTimeComponent) {\n      dateObj.setHours(0, 0, 0, 0);\n    }\n\n    return dateObj;\n  }\n\n  return null;\n};\n", "// ---------- Types ----------\ninterface MimeGroups {\n  image?: string[];\n  audio?: string[];\n  video?: string[];\n  text?: string[];\n  application?: string[];\n}\n\ninterface ChannelNodeConfig {\n  mimeGroups?: MimeGroups;\n  extensions?: string[];\n  max?: number;\n  maxByCategory?: {\n    image?: number;\n    video?: number;\n    audio?: number;\n    document?: number;\n  };\n}\n\ntype DefaultNodeConfig = Omit<ChannelNodeConfig, 'max'> & { max: number };\n\ninterface ChannelConfig {\n  [medium: string]: ChannelNodeConfig | undefined; // includes '*'\n}\n\ntype CategoryType = 'image' | 'video' | 'audio' | 'document' | undefined;\n\ninterface GetChannelParams {\n  channelType?: ChannelKey; // align with ChannelKey\n  medium?: string;\n}\n\ninterface GetMaxUploadParams extends GetChannelParams {\n  mime?: string;\n}\n\n// ---------- Channels ----------\nexport const INBOX_TYPES = {\n  WEB: 'Channel::WebWidget',\n  FB: 'Channel::FacebookPage',\n  TWITTER: 'Channel::TwitterProfile',\n  TWILIO: 'Channel::TwilioSms',\n  WHATSAPP: 'Channel::Whatsapp',\n  API: 'Channel::Api',\n  EMAIL: 'Channel::Email',\n  TELEGRAM: 'Channel::Telegram',\n  LINE: 'Channel::Line',\n  SMS: 'Channel::Sms',\n  INSTAGRAM: 'Channel::Instagram',\n  VOICE: 'Channel::Voice',\n} as const;\n\n// derive key type AFTER INBOX_TYPES is declared\ntype ChannelKey = typeof INBOX_TYPES[keyof typeof INBOX_TYPES];\n\n// CHANNEL_CONFIGS shape: channels are optional; default node requires max\ntype ChannelConfigs = Partial<Record<ChannelKey, ChannelConfig>> & {\n  default: DefaultNodeConfig;\n};\n\n// ---------- Docs ----------\n/**\n * LINE: https://developers.line.biz/en/reference/messaging-api/#image-message, https://developers.line.biz/en/reference/messaging-api/#video-message\n * INSTAGRAM: https://developers.facebook.com/docs/instagram-platform/instagram-api-with-instagram-login/messaging-api#requirements\n * WHATSAPP CLOUD: https://developers.facebook.com/docs/whatsapp/cloud-api/reference/media#supported-media-types\n * TWILIO WHATSAPP: https://www.twilio.com/docs/whatsapp/guidance-whatsapp-media-messages\n * TWILIO SMS: https://www.twilio.com/docs/messaging/guides/accepted-mime-types\n */\n\n// ---------- Central config ----------\n/**\n * Upload rules configuration.\n *\n * Each node can define:\n * - mimeGroups: { prefix: [exts] }\n *   Example: { image: [\"png\",\"jpeg\"] } → [\"image/png\",\"image/jpeg\"]\n *   Special: [\"*\"] → allow all (e.g. \"image/*\").\n * - extensions: Raw file extensions (e.g. [\".3gpp\"]).\n * - max: Default maximum size in MB for this channel.\n * - maxByCategory: Override per category (image, video, audio, document).\n *\n * Resolution order:\n *  1. channel + medium (e.g. TWILIO.whatsapp)\n *  2. channel + \"*\" fallback\n *  3. global default\n */\nconst CHANNEL_CONFIGS: ChannelConfigs = {\n  default: {\n    mimeGroups: {\n      image: ['*'],\n      audio: ['*'],\n      video: ['*'],\n      text: ['csv', 'plain', 'rtf', 'xml'],\n      application: [\n        'json',\n        'pdf',\n        'xml',\n        'zip',\n        'x-7z-compressed',\n        'vnd.rar',\n        'x-tar',\n        'msword',\n        'vnd.ms-excel',\n        'vnd.ms-powerpoint',\n        'vnd.oasis.opendocument.text',\n        'vnd.openxmlformats-officedocument.presentationml.presentation',\n        'vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n        'vnd.openxmlformats-officedocument.wordprocessingml.document',\n      ],\n    },\n    extensions: ['.3gpp'],\n    max: 40,\n  },\n\n  [INBOX_TYPES.WHATSAPP]: {\n    '*': {\n      mimeGroups: {\n        audio: ['aac', 'amr', 'mp3', 'm4a', 'ogg'],\n        image: ['jpeg', 'png'],\n        video: ['3gp', 'mp4'],\n        text: ['plain'],\n        application: [\n          'pdf',\n          'vnd.ms-excel',\n          'vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n          'msword',\n          'vnd.openxmlformats-officedocument.wordprocessingml.document',\n          'vnd.ms-powerpoint',\n          'vnd.openxmlformats-officedocument.presentationml.presentation',\n        ],\n      },\n      maxByCategory: { image: 5, video: 16, audio: 16, document: 100 },\n    },\n  },\n\n  [INBOX_TYPES.INSTAGRAM]: {\n    '*': {\n      mimeGroups: {\n        audio: ['aac', 'm4a', 'wav', 'mp4'],\n        image: ['png', 'jpeg', 'gif'],\n        video: ['mp4', 'ogg', 'avi', 'mov', 'webm'],\n      },\n      maxByCategory: { image: 16, video: 25, audio: 25 },\n    },\n  },\n\n  [INBOX_TYPES.FB]: {\n    '*': {\n      mimeGroups: {\n        audio: ['aac', 'm4a', 'wav', 'mp4'],\n        image: ['png', 'jpeg', 'gif'],\n        video: ['mp4', 'ogg', 'avi', 'mov', 'webm'],\n        text: ['plain'],\n        application: [\n          'pdf',\n          'vnd.ms-excel',\n          'vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n          'msword',\n          'vnd.openxmlformats-officedocument.wordprocessingml.document',\n          'vnd.ms-powerpoint',\n          'vnd.openxmlformats-officedocument.presentationml.presentation',\n        ],\n      },\n      maxByCategory: { image: 8, audio: 25, video: 25, document: 25 },\n    },\n  },\n\n  [INBOX_TYPES.LINE]: {\n    '*': {\n      mimeGroups: {\n        image: ['png', 'jpeg'],\n        video: ['mp4'],\n      },\n      maxByCategory: { image: 10 },\n    },\n  },\n\n  [INBOX_TYPES.TWILIO]: {\n    sms: { max: 5 },\n    whatsapp: {\n      mimeGroups: {\n        image: ['png', 'jpeg'],\n        audio: ['mpeg', 'opus', 'ogg', 'amr'],\n        video: ['mp4'],\n        application: ['pdf'],\n      },\n      max: 5,\n    },\n  },\n};\n\n// ---------- Helpers ----------\n/**\n * @name DOC_HEADS\n * @description MIME type categories that should be considered \"document\"\n */\nconst DOC_HEADS = new Set<string>(['application', 'text']);\n\n/**\n * @name categoryFromMime\n * @description Gets a high-level category name from a MIME type.\n *\n * @param {string} mime - MIME type string (e.g. \"image/png\").\n * @returns {\"image\"|\"video\"|\"audio\"|\"document\"|undefined} Category name.\n */\nconst categoryFromMime = (mime?: string): CategoryType => {\n  const head = mime?.split('/')?.[0] ?? '';\n  return DOC_HEADS.has(head) ? 'document' : (head as CategoryType);\n};\n\n/**\n * @name getNode\n * @description Finds the matching rule node for a channel and optional medium.\n *\n * @param {ChannelKey} [channelType] - One of INBOX_TYPES.\n * @param {string}      [medium]     - Optional sub-medium (e.g. \"sms\",\"whatsapp\").\n * @returns {ChannelNodeConfig} Config node with rules.\n */\nconst getNode = (\n  channelType?: ChannelKey,\n  medium?: string\n): ChannelNodeConfig => {\n  if (!channelType) return CHANNEL_CONFIGS.default;\n\n  const channelCfg = CHANNEL_CONFIGS[channelType];\n  if (!channelCfg) return CHANNEL_CONFIGS.default;\n\n  return (\n    channelCfg[medium ?? '*'] ?? channelCfg['*'] ?? CHANNEL_CONFIGS.default\n  );\n};\n\n/**\n * @name expandMimeGroups\n * @description Expands MIME groups and extensions into a list of strings.\n *\n * Examples:\n *  { image: [\"*\"] }         → [\"image/*\"]\n *  { image: [\"png\"] }       → [\"image/png\"]\n *  { application: [\"pdf\"] } → [\"application/pdf\"]\n *  extensions: [\".3gpp\"]    → [\".3gpp\"]\n *\n * @param {Object} mimeGroups - Grouped MIME suffixes by prefix.\n * @param {string[]} extensions - Extra raw extensions.\n * @returns {string[]} Expanded list of MIME/extension strings.\n */\nconst expandMimeGroups = (\n  mimeGroups: MimeGroups = {},\n  extensions: string[] = []\n): string[] => {\n  const mimes = Object.entries(mimeGroups).flatMap(([prefix, exts]) =>\n    (exts ?? []).map((ext: string) =>\n      ext === '*' ? `${prefix}/*` : `${prefix}/${ext}`\n    )\n  );\n  return [...mimes, ...extensions];\n};\n\n// ---------- Public API ----------\n/**\n * @name getAllowedFileTypesByChannel\n * @description Builds the full \"accept\" string for <input type=\"file\">,\n * based on channel + medium rules.\n *\n * @param {Object} params\n * @param {string} [params.channelType] - Channel type (from INBOX_TYPES).\n * @param {string} [params.medium] - Medium under the channel.\n * @returns {string} Comma-separated list of allowed MIME types/extensions.\n *\n * @example\n * getAllowedFileTypesByChannel({ channelType: INBOX_TYPES.WHATSAPP });\n * → \"audio/aac, audio/amr, image/jpeg, image/png, video/3gp, ...\"\n */\nexport const getAllowedFileTypesByChannel = ({\n  channelType,\n  medium,\n}: GetChannelParams = {}): string => {\n  const node = getNode(channelType, medium);\n  const { mimeGroups, extensions } =\n    !node.mimeGroups && !node.extensions ? CHANNEL_CONFIGS.default : node;\n\n  return expandMimeGroups(mimeGroups, extensions).join(', ');\n};\n\n/**\n * @name getMaxUploadSizeByChannel\n * @description Gets the maximum allowed file size (in MB) for a channel, medium, and MIME type.\n *\n * Priority:\n * - Category-specific size (image/video/audio/document).\n * - Channel/medium-level max.\n * - Global default max.\n *\n * @param {Object} params\n * @param {string} [params.channelType] - Channel type (from INBOX_TYPES).\n * @param {string} [params.medium] - Medium under the channel.\n * @param {string} [params.mime] - MIME type string (for category lookup).\n * @returns {number} Maximum file size in MB.\n *\n * @example\n * getMaxUploadSizeByChannel({ channelType: INBOX_TYPES.WHATSAPP, mime: \"image/png\" });\n * → 5\n */\nexport const getMaxUploadSizeByChannel = ({\n  channelType,\n  medium,\n  mime,\n}: GetMaxUploadParams = {}): number => {\n  const node = getNode(channelType, medium);\n  const cat = categoryFromMime(mime);\n  const catMax = cat ? node.maxByCategory?.[cat] : undefined;\n  return catMax ?? node.max ?? CHANNEL_CONFIGS.default.max;\n};\n"],
  "mappings": "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",
  "names": ["o", "debounce", "func", "wait", "immediate", "maxWait", "timeout", "lastInvokeTime", "args", "Array", "_len", "_key", "arguments", "time", "Date", "now", "isFirstCall", "apply", "clearTimeout", "timeSinceLastInvoke", "shouldInvokeNow", "undefined", "setTimeout", "_this", "getContrastingTextColor", "bgColor", "color", "replace", "r", "parseInt", "slice", "g", "b", "formatDate", "_ref", "date", "todayText", "yesterdayText", "dateValue", "isToday", "isYesterday", "formatTime", "timeInSeconds", "formattedTime", "minutes", "Math", "floor", "seconds", "hours", "days", "trimContent", "content", "maxLength", "ellipsis", "trimmedContent", "length", "substring", "convertSecondsToTimeUnit", "unitNames", "unit", "Number", "toFixed", "minute", "hour", "day", "fileNameWithEllipsis", "file", "fullName", "_ref2", "_file$filename", "filename", "name", "dotIndex", "lastIndexOf", "_ref3", "extension", "splitName", "trimmedName", "trim", "firstName", "lastName", "nameParts", "split", "pop", "join", "downloadFile", "_ref5", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "_ref4", "url", "type", "_ref4$extension", "_filenameMatch$", "response", "blobData", "contentType", "fileExtension", "dispositionHeader", "filenameMatch", "blobUrl", "link", "wrap", "_callee$", "_context", "prev", "next", "Error", "fetch", "cache", "sent", "ok", "status", "blob", "headers", "get", "match", "URL", "createObjectURL", "Object", "assign", "document", "createElement", "href", "download", "style", "body", "append", "click", "remove", "revokeObjectURL", "t0", "stop", "_x", "getFileInfo", "defaultInfo", "base", "cleanUrl", "encodedFilename", "fileName", "decodeURIComponent", "startsWith", "includes", "lastDotIndex", "toLowerCase", "error", "console", "formatNumber", "num", "n", "Intl", "NumberFormat", "notation", "maximumFractionDigits", "format", "toURL", "input", "window", "location", "origin", "isSameHost", "url1", "url2", "urlObj1", "urlObj2", "hostname", "isValidDomain", "domain", "domainRegex", "test", "MessageType", "getRecipients", "lastEmail", "conversationContact", "inboxEmail", "forwardToEmail", "to", "cc", "bcc", "messageType", "message_type", "isIncoming", "INCOMING", "emailAttributes", "contentAttributes", "content_attributes", "email", "from", "_ref$cc_emails", "cc_emails", "ccEmails", "_ref$bcc_emails", "bcc_emails", "bccEmails", "_ref$to_emails", "to_emails", "toEmails", "isLastEmailFromContact", "_emailAttributes$from", "_to", "_emailAttributes$from2", "push", "_to2", "_emailAttributes$to", "concat", "isArray", "_cc", "filter", "emailAddress", "replyUUIDPattern", "Set", "parseBoolean", "candidate", "candidateString", "String", "Boolean", "JSON", "parse", "sanitizeTextForRender", "text", "sortAsc", "arr", "sort", "a", "quantile", "q", "sorted", "_quantileForSorted", "clamp", "min", "max", "value", "clamped", "pos", "rest", "getQuantileIntervals", "data", "intervals", "map", "interval", "calculateCenterOffset", "mouseX", "mouseY", "rect", "centerX", "left", "width", "centerY", "top", "height", "relativeX", "relativeY", "applyRotationTransform", "angle", "radians", "PI", "cos", "sin", "rotatedX", "rotatedY", "normalizeToPercentage", "x", "y", "MESSAGE_VARIABLES_REGEX", "skipCodeBlocks", "str", "capitalizeName", "word", "charAt", "toUpperCase", "getFirstName", "user", "shift", "getLastName", "getMessageVariables", "conversation", "contact", "inbox", "_conversation$meta", "meta", "assignee", "sender", "id", "_conversation$custom_", "custom_attributes", "conversationCustomAttributes", "contactCustomAttributes", "standardVariables", "phone_number", "_assignee$email", "conversationCustomAttributeVariables", "entries", "reduce", "acc", "key", "contactCustomAttributeVariables", "_ref6", "variables", "_extends", "replaceVariablesInMessage", "_ref7", "message", "_", "getUndefinedVariablesInMessage", "_ref8", "messageWithOutCodeBlocks", "matches", "variable", "createTypingIndicator", "onStartTyping", "onStopTyping", "idleTime", "timer", "start", "reset", "calculateThreshold", "timeOffset", "threshold", "currentTime", "findMostUrgentSLAStatus", "SLAStatuses", "sla1", "sla2", "abs", "formatSLATime", "units", "mo", "d", "h", "m", "parts", "keys", "forEach", "createSLAObject", "appliedSla", "chat", "frtThreshold", "sla_first_response_time_threshold", "nrtThreshold", "sla_next_response_time_threshold", "rtThreshold", "sla_resolution_time_threshold", "createdAt", "created_at", "firstReplyCreatedAt", "first_reply_created_at", "waitingSince", "waiting_since", "SLATypes", "FRT", "condition", "NRT", "RT", "SLAStatus", "evaluateSLAConditions", "icon", "isSlaMissed", "evaluateSLAStatus", "mostUrgent", "coerceToDate", "dateInput", "timestamp", "timestampMs", "toString", "dateObj", "isNaN", "getTime", "hasTimeComponent", "setHours", "INBOX_TYPES", "WEB", "FB", "TWITTER", "TWILIO", "WHATSAPP", "API", "EMAIL", "TELEGRAM", "LINE", "SMS", "INSTAGRAM", "VOICE", "CHANNEL_CONFIGS", "_CHANNEL_CONFIGS", "mimeGroups", "image", "audio", "video", "application", "extensions", "maxByCategory", "sms", "whatsapp", "DOC_HEADS", "categoryFromMime", "mime", "head", "_mime$split$", "_mime$split", "has", "getNode", "channelType", "medium", "channelCfg", "_channelCfg", "expandMimeGroups", "mimes", "flatMap", "prefix", "exts", "ext", "getAllowedFileTypesByChannel", "_temp", "node", "getMaxUploadSizeByChannel", "_temp2", "cat", "catMax", "_node$maxByCategory"]
}
